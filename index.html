<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>YoungHyuk</title>
  <link rel="stylesheet" href="assets/style.css" />
  <script defer src="assets/router.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="inner">
      <a class="brand" href="index.html"><span class="dot"></span>YoungHyuk</a>
      <nav class="nav">
        <a class="active" href="index.html">홈</a>
        <a href="reviews.html">논문 리뷰</a>
        <a href="implementations.html">논문 구현</a>
        <a href="projects.html">프로젝트</a>
        <a href="contacts.html">연락처</a>
      </nav>
    </div>
  </header>

  <div class="container">
    <div class="card">
      <div class="pad">
        <h1 class="h1">Command Home</h1>
        <p class="p">관리/작성은 커맨드로 진입해. (로그인 필요)</p>

        <div class="hr"></div>

        <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap">
          <input id="homeCmd" class="input" placeholder="예: help / admin / write reviews / manage projects / open reviews test-post" style="flex:1; min-width:280px"/>
          <button class="btn primary" id="goBtn">Go</button>
        </div>

        <div class="hr"></div>
        <div id="homeLog" class="preview" style="font-family:var(--mono); font-size:12px"></div>
      </div>
    </div>

    <footer class="footer">
      <span class="kbd">help</span> / <span class="kbd">admin</span> / <span class="kbd">write reviews</span> / <span class="kbd">manage implementations</span>
    </footer>
  </div>

  <script>
    const log = (t)=>{ document.querySelector("#homeLog").innerHTML = t; };
    const help =
`Commands:
- help
- admin
- write <reviews|implementations|projects>
- manage <reviews|implementations|projects>
- open <category> <slug>`;

    function run(){
      const v = document.querySelector("#homeCmd").value || "";
      try{
        const intent = window.YHRouter.parseHomeCommand(v);
        if(intent.target === "help"){
          log("<pre><code>"+help.replaceAll("<","&lt;").replaceAll(">","&gt;")+"</code></pre>");
          return;
        }
        window.YHRouter.setIntent(intent);
        // 로그인 여부는 login.html에서 판단
        location.href = "login.html";
      }catch(e){
        log(`<div style="color:rgba(255,107,107,.9)">${e.message}</div>`);
      }
    }
    document.querySelector("#goBtn").addEventListener("click", run);
    document.querySelector("#homeCmd").addEventListener("keydown", (e)=>{ if(e.key==="Enter") run(); });
    log("type: <b>help</b>");
  </script>
</body>
</html>
